<UserControl xmlns="https://github.com/avaloniaui"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:vm="using:DbPad.ViewModels"
            x:Class="DbPad.Views.TabControlView"
            x:DataType="vm:MainWindowViewModel"
            xmlns:extension="clr-namespace:DbPad.Extensions"
            xmlns:views="clr-namespace:DbPad.Views">

	<TabControl ItemsSource="{Binding Tabs}" SelectedItem="{Binding SelectedTab}">
		<TabControl.ItemTemplate>
			<DataTemplate>
				<DockPanel VerticalAlignment="Stretch">
					<Button DockPanel.Dock="Right"
							Margin="5,0,0,0"
							Padding="5,0"
							Content="x"
							FontSize="12"
							VerticalContentAlignment="Center"
							HorizontalContentAlignment="Center"
							Command="{Binding $parent[TabControl].DataContext.RemoveTabCommand}"
							CommandParameter="{Binding}"
							Background="Transparent"
							BorderThickness="0,0,0,0">
						<Button.Styles>
							<Style Selector="Button:pointerover /template/ ContentPresenter">
								<Setter Property="Background" Value="LightGray" />
								<Setter Property="CornerRadius" Value="2" />
							</Style>
						</Button.Styles>
					</Button>
					<TextBlock Text="{Binding TabCaption, FallbackValue=Tab}"
							   VerticalAlignment="Center"
							   ToolTip.Tip="{Binding TabCaption}" />
				</DockPanel>
			</DataTemplate>
		</TabControl.ItemTemplate>

		<TabControl.DataTemplates>
			<DataTemplate DataType="vm:QueryTabModel">
				<views:QueryTabView />
			</DataTemplate>
			<DataTemplate DataType="vm:EditTableTabModel">
				<views:EditTableTabView />
			</DataTemplate>
			<DataTemplate DataType="vm:DesignTableTabModel">
				<views:DesignTableTabView />
			</DataTemplate>
			<DataTemplate DataType="vm:ConnectionTabModel">
				<views:ConnectionTabView />
			</DataTemplate>
		</TabControl.DataTemplates>

		<TabControl.ContentTemplate>
			<DataTemplate>
				<ContentControl Content="{Binding}" />
			</DataTemplate>
		</TabControl.ContentTemplate>	
	</TabControl>
</UserControl>